/*! api-smart-diff@0.2.13 */
var ApiSmartDiff=function(r){var n={};function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=r,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(C,e,t){"use strict";t.r(e),t.d(e,"messageTraitsRules",function(){return $}),t.d(e,"messageRules",function(){return N}),t.d(e,"asyncApi2Rules",function(){return z}),t.d(e,"openapi3Rules",function(){return L}),t.d(e,"jsonSchemaRules",function(){return M}),t.d(e,"serviceNodeRules",function(){return U}),t.d(e,"RuleMetaKey",function(){return s}),t.d(e,"DIFF_META_KEY",function(){return n}),t.d(e,"DiffAction",function(){return y}),t.d(e,"ClassifierType",function(){return r}),t.d(e,"breaking",function(){return a}),t.d(e,"nonBreaking",function(){return i}),t.d(e,"unclassified",function(){return o}),t.d(e,"annotation",function(){return c}),t.d(e,"allNonBreaking",function(){return f}),t.d(e,"allBreaking",function(){return u}),t.d(e,"onlyAddBreaking",function(){return l}),t.d(e,"addNonBreaking",function(){return d}),t.d(e,"allUnclassified",function(){return p}),t.d(e,"allAnnotation",function(){return m}),t.d(e,"apiDiff",function(){return J}),t.d(e,"compare",function(){return E}),t.d(e,"apiMerge",function(){return Q}),t.d(e,"breakingIf",function(){return h}),t.d(e,"breakingIfAfterTrue",function(){return g}),t.d(e,"typeOf",function(){return b}),t.d(e,"parsePath",function(){return v}),t.d(e,"buildPath",function(){return R}),t.d(e,"getPathRuleMeta",function(){return O}),t.d(e,"findExternalRefs",function(){return x}),t.d(e,"enumRules",function(){return w}),t.d(e,"mapRules",function(){return K});const s=Symbol("rule"),n="$diff";var y,r;(t=y=y||{}).add="add",t.remove="remove",t.replace="replace",(e=r=r||{}).breaking="breaking",e.nonBreaking="non-breaking",e.annotation="annotation",e.unclassified="unclassified";const{breaking:a,nonBreaking:i,unclassified:o,annotation:c}=r,f=[i,i,i],u=[a,a,a],l=[a,i,i],d=[i,a,a],p=[o,o,o],m=[c,c,c],h=e=>e?a:i,g=(e,t)=>h(t),b=e=>Array.isArray(e)?"array":null==typeof e?"null":typeof e,v=e=>{var[,...e]=e.split("/").map(e=>e.replace(new RegExp("~1","g"),"/"));return e},R=e=>"/"+e.map(e=>String(e).replace(new RegExp("/","g"),"~1")).join("/"),O=(e,t)=>{let r=e;for(var n of[...t]){if(r.hasOwnProperty("/"+n)&&"number"!=typeof n||(n="*"),!r.hasOwnProperty("/"+n))return;{const a=r["/"+n];if(Array.isArray(a))return;r="function"==typeof a?a():a}}return r[s]},x=e=>{if("object"!=typeof e)return[];let t=new Set;if("array"===b(e))for(const n of e)"object"==typeof n&&(t=new Set([...t,...x(n)]));else for(const a of Object.keys(e)){var r;"$ref"===a?([r]=e[a].split("#"),r&&t.add(r)):"object"==typeof e[a]&&(t=new Set([...t,...x(e[a])]))}return[...t]},w=(e,t)=>(e[s]={matchItemsFunc:t},e),K=(e,t)=>(e[s]={matchKeysFunc:t},e),j=[a,i,(e,t)=>h(t<e)],S=[a,i,(e,t)=>h(e<t)],_=[g,i,g],k=[g,i,g],D=[a,i,(e,t)=>h(!!(e%t))],M=(e=p)=>({"/":e,"/title":m,"/multipleOf":D,"/maximum":j,"/exclusiveMaximum":_,"/minimum":S,"/exclusiveMinimum":_,"/maxLength":j,"/minLength":S,"/pattern":[a,i,a],"/maxItems":j,"/minItems":S,"/uniqueItems":k,"/maxProperties":j,"/minProperties":S,"/required":{"/":l,"/*":[a,i,a]},"/enum":{"/":[a,i,a],"/*":[i,a,a]},"/type":[a,i,a],"/not":{"/":[a,i,a],"/*":()=>M(u)},"/allOf":{"/":[a,i,a],"/*":()=>M(u)},"/oneOf":{"/":[a,i,a],"/*":()=>M(d)},"/anyOf":{"/":[a,i,a],"/*":()=>M(d)},"/items":()=>M(d),"/properties":{"/":[a,i,a],"/*":()=>M(d)},"/additionalProperties":()=>M([a,a,g]),"/description":m,"/format":[a,i,a],"/default":[i,a,a],"/nullable":k,"/discriminator":{"/":p,"/propertyName":p,"/mapping":p},"/readOnly":k,"/writeOnly":k,"/example":m,"/examples":m,"/externalDocs":m,"/deprecated":k,"/xml":{"/":p,"/name":p,"/namespace":p,"/prefix":p,"/attribute":p,"/wrapped":p}});var t={"/":d,"/location":d,"/description":m},e={"/summary":m,"/tags":m,"/externalDocs":m,"/bindings":p},A=Object.assign({"/":d,"/*":d,"/operationId":d,"/description":m},e);const $=Object.assign({"/":d,"/*":d,"/headers":p,"/correlationId":t,"/schemaFormat":u,"/contentType":d,"/name":f,"/title":f,"/examples":m},e),N=Object.assign({"/":u,"/headers":p,"/correlationId":t,"/schemaFormat":u,"/contentType":d,"/name":f,"/title":f,"/description":f,"/examples":m,"/traits":$,"/payload":M(u)},e);t=Object.assign({"/":d,"/operationId":d,"/description":m,"/traits":A,"/message":N},e),A={"/":d,"/version":d,"/termsOfService":d,"/license":{"/":d,"/name":u,"/url":l},"/title":m,"/description":m,"/contact":{"/":m,"/name":m,"/url":m,"/email":m}},e={"/":d,"/*":{"/":d,"/url":d,"/description":m,"/protocol":u,"/protocolVersion":u,"/variables":{"/":d,"/*":{"/":d,"/enum":{"/":d,"/*":d},"/default":u,"/description":m,"/examples":m}},"/security":{"/":u,"/*":u},"/bindings":p}},t={"/":d,"/description":f,"/bindings":p,"/subscribe":t,"/publish":t,"/parameters":{"/":u,"/*":{"/":d,"/description":f,"/schema":M(u),"/location":u}}};const z={"/asyncapi":d,"/id":m,"/defaultContentType":u,"/info":A,"/servers":e,"/channels":{"/":d,"/*":t},"/components":f,"/tags":m,"/externalDocs":m};var A={"/":[i,a,a],"/*":{"/":[i,a,a],"/url":[i,a,a],"/description":m,"/variables":{"/":[i,a,a],"/*":{"/":[i,a,a],"/enum":{"/":[i,a,a],"/*":[i,a,a]},"/default":[a,a,a],"/description":m}}}},e={"/":[i,a,a],"/*":{"/":[i,a,a],"/name":[i,a,a],"/in":[i,a,a],"/description":m,"/required":[a,i,g],"/deprecated":[a,i,g]}},t={"/":[i,a,a],"/*":{"/":[i,a,a],"/description":m,"/required":[a,i,g],"/deprecated":[a,i,g]}},P={"/":[i,i,i],"/*":{"/contentType":[i,a,a],"/headers":t,"/style":[i,a,a],"/explode":[i,a,a],"/allowReserved":[i,a,a]}},P={"/":[i,a,a],"/*":{"/":[i,a,a],"/schema":M(u),"/example":m,"/examples":m,"/encoding":P}},q={"/":[i,a,a],"/*":{"/":[i,a,a],"/description":m,"/content":P,"/required":[a,i,(e,t)=>t?a:i]}},P={"/":[i,a,a],"/*":{"/":[i,a,a],"/description":m,"/headers":t,"/content":P}},I={"/":[a,i,o],"/*":[a,i,o]},F={"/":[i,a,a],"/tags":m,"/summary":m,"/description":m,"/externalDocs":m,"/operationId":[i,a,a],"/parameters":e,"/requestBody":q,"/responses":P,"/deprecated":[a,i,g],"/security":I,"/servers":A};const L={"/openapi":[i,a,a],"/info":{"/":[i,a,a],"/title":m,"/description":m,"/termsOfService":m,"/contact":m,"/licence":{"/":[i,a,a],"/name":[a,a,a],"/url":[a,i,i]},"/version":m},"/servers":A,"/paths":(F={"/":[i,a,a],"/*":{"/":[i,a,i],"/summary":m,"/description":m,"/*":F,"/servers":A,"/parameters":e}},K(F,(e,t)=>{return e.replace(new RegExp("{.*?}","g"),"*")===t.replace(new RegExp("{.*?}","g"),"*")})),"/components":{"/":[i,i,i],"/schemas":{"/":[i,a,a],"/*":M(d)},"/responses":{"/":[i,a,a],"/*":P},"/parameters":{"/":[i,a,a],"/*":e},"/examples":m,"/requestBodies":{"/":[i,a,a],"/*":q},"/headers":t,"/securitySchemes":{"/":[a,i,a],"/*":{"/":[a,i,a],"/type":[a,i,a],"/description":m,"/name":[a,i,a],"/in":[a,i,a],"/scheme":[a,i,a],"/bearerFormat":m,"/flows":[a,i,a],"/openIdConnectUrl":m}}},"/security":I,"/tags":m,"/externalDocs":m};A=e=>w(e,(e,t)=>{var r;return t.type===e.type&&((null==(r=e.data.path)?void 0:r.replace(new RegExp("{.*?}","g"),"*"))===(null==(r=t.data.path)?void 0:r.replace(new RegExp("{.*?}","g"),"*"))&&e.data.method===t.data.method)}),F=e=>w(e,(e,t)=>t.mediaType===e.mediaType),P={"/name":p,"/style":p,"/description":m,"/explode":p,"/required":p,"/deprecated":p},e={"/":p,"/mediaType":p,"/schema":M(p),"/examples":m,"/encodings":p},q={"/path":{"/":p,"/*":P},"/query":{"/":p,"/*":Object.assign(Object.assign({},P),{"/allowEmptyValue":p,"/allowReserved":p})},"/headers":{"/":p,"/*":P},"/cookie":{"/":p,"/*":P},"/body":{"/":p,"/contents":F({"/":p,"/*":e}),"/required":p,"/description":m}},t={"/":p,"/*":{"/name":p,"/style":p,"/description":m,"/explode":p,"/required":p,"/deprecated":p}},I={"/code":p,"/contents":F({"/":p,"/*":e}),"/headers":t,"/description":m},P={"/url":p,"/name":p,"/description":m,"/variables":p},F={"/id":m,"/iid":m,"/tags":m,"/summary":m,"/description":m,"/method":u,"/path":u,"/request":q,"/responses":I,"/servers":{"/":p,"/*":P},"/callbacks":A({"/callbackName":p,"/method":p,"/path":p,"/request":q,"/responses":I,"/deprecated":p,"/internal":p,"/extensions":p}),"/security":p,"/deprecated":p,"/internal":p,"/extensions":p},e={"/id":m,"/iid":m,"/tags":m,"/summary":m,"/description":m,"/name":m,"/version":m,"/servers":{"/":p,"/*":P},"/security":p,"/securitySchemes":p,"/termsOfService":p,"/contact":m,"/license":p,"/logo":m};const U={"/*":m,"/data":e,"/children":A({"/":[i,a,a],"/*":{"/":[i,a,a],"/data":F,"/*":m}}),"/components":{"/":[i,i,i],"/schemas":{"/":[i,a,a],"/*":M(d)}}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */const T=(e,t,r,n)=>{if(e.hasOwnProperty("$ref")){const i=e["$ref"],o=function(e,t){var r={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}(e,["$ref"]);if(r.has(i))return e;var[a,s]=i.split("#");if(a){if(!n.has(a))return e;t=n.get(a)}e=Object.assign(Object.assign({},o),((e,t,r={})=>{let n=e;r=new Map(Object.entries(r));for(const a of v(t)){if(void 0===(n="array"===b(n)?n[+a]:n[a]))break;n=T(n,e,new Set,r)}return n})(t,s,n)),r.add(i),n.set(i,e)}return e},B=(e,t={})=>{const r=e;const n=((e,t)=>{let r=e;for(var n of[...t,""]){if(r.hasOwnProperty("/"+n)&&"number"!=typeof n||(n="*"),!r.hasOwnProperty("/"+n))return p;{const a=r["/"+n];if(Array.isArray(a))return a;r="function"==typeof a?a():a}}return p})(t,e.path)[["add","remove","replace"].indexOf(e.action)];return r.type="function"==typeof n?n(e.before,e.after):n,r};class V{constructor(e,t,r){this.before=e,this.after=t,this.beforeRefs=new Set,this.afterRefs=new Set,this.beforeCache=new Map,this.afterCache=new Map,this.rules="string"==typeof r.rules?this.getBaseRules(r.rules):r.rules,this.trimStrings=r.trimStrings,this.caseSensitive=r.caseSensitive,this.strictArrays=r.strictArrays;var n=r.externalRefs||{};for(const a of Object.keys(n))this.beforeCache.set(a,n[a]),this.afterCache.set(a,n[a])}normalizeString(e){return e=this.trimStrings?e.trim():e,e=this.caseSensitive?e:e.toLowerCase()}dereference(e,t,r){const n="#"+R(r);this.beforeRefs.add(n),this.afterRefs.add(n);return[T(e,this.before,this.beforeRefs,this.beforeCache),T(t,this.after,this.afterRefs,this.afterCache),()=>{e.$ref&&this.beforeRefs.delete(e.$ref),t.$ref&&this.afterRefs.delete(t.$ref),this.beforeRefs.delete(n),this.afterRefs.delete(n)}]}getBaseRules(e){switch(e){case"OpenApi3":return L;case"AsyncApi2":return z;case"JsonSchema":return M()}}equalResult(e,t){return{diffs:[]}}diffResult(e){return{diffs:[B(e,this.rules)]}}mergeResult(e,t){e.diffs=[...e.diffs,...t.diffs]}}const J=(e,t,r)=>{return E(e,t,new V(e,t,r)).diffs},E=(e,t,r,n=[])=>{if(b(e)!==b(t))return r.diffResult({path:n,before:e,after:t,action:y.replace});switch(b(e)){case"object":return Y(e,t,r,n);case"array":return G(e,t,r,n);default:return"string"==typeof e&&(e=r.normalizeString(e),t=r.normalizeString(t)),e!==t?r.diffResult({path:n,before:e,after:t,action:y.replace}):r.equalResult(e,n)}},Y=(e,t,r,n)=>{var a={diffs:[]};const[s,i,o]=r.dereference(e,t,n);if(0===Object.keys(s).length&&0===Object.keys(i).length)return r.equalResult(e,n);t=Object.keys(s);const c=new Set(Object.keys(i)),f=r.rules&&O(r.rules,n);for(const m of t){var u,l=[...c].find(e=>e===m||(null===f||void 0===f?void 0:f.matchKeysFunc)&&f.matchKeysFunc(m,e)),d=[...n,m];l!==m&&(u={path:d,before:m,after:l,action:y.replace},r.mergeResult(a,r.diffResult(u))),l?(r.mergeResult(a,E(s[m],i[l],r,d)),c.delete(l)):(u={path:d,before:s[m],action:y.remove},r.mergeResult(a,r.diffResult(u)))}for(const h of c){var p={path:[...n,h],after:i[h],action:y.add};r.mergeResult(a,r.diffResult(p))}return o(),a},G=(t,r,e,n)=>{if(0===t.length&&0===r.length)return e.equalResult(t,n);const a=e.rules&&O(e.rules,n);if(!(e.strictArrays||null!==a&&void 0!==a&&a.matchItemsFunc))return H(t,r,e,n);var s={diffs:[]};const i=new Set(r.keys());for(const f of t.keys()){var o,c=[...n,f];null!==a&&void 0!==a&&a.matchItemsFunc?void 0===(o=(null===a||void 0===a?void 0:a.matchItemsFunc)&&[...i].find(e=>a.matchItemsFunc(t[f],r[e])))?e.mergeResult(s,e.diffResult({path:c,before:t[f],action:y.remove})):(i.delete(o),e.mergeResult(s,E(t[f],r[o],e,c))):f>=r.length?e.mergeResult(s,e.diffResult({path:c,before:t[f],action:y.remove})):(i.delete(f),e.mergeResult(s,E(t[f],r[f],e,c)))}for(const u of i)e.mergeResult(s,e.diffResult({path:[...n,-1],after:r[u],action:y.add}));return s},H=(n,a,s,i)=>{var t,o={diffs:[]};const e=[],c=[],f=new Set,u=new Set;for(let r=0;r<n.length;r++){let t=[];for(let e=0;e<a.length;e++)if(!f.has(e)){var l=E(n[r],a[e],s,[...i,r]);if(!l.diffs.length){f.add(e),u.add(r),t=l;break}t.push(l)}c.push(t)}for(let r=0;r<n.length;r++){const m=c[r];if(u.has(r))e[r]=[],s.mergeResult(o,m);else{const h=[...Array(a.length).keys()];var d,p=h.sort((e,t)=>{return((null==(e=m[e])?void 0:e.length)||0)-((null==(e=m[t])?void 0:e.length)||0)});for(let e=0;e<a.length;e++){let t=p[e];if(!f.has(t)){for(let e=0;e<n.length;e++)if(!u.has(e)&&c[e][t]<c[r][t]){t=-1;break}if(0<=t){s.mergeResult(o,m[t]),u.add(r),f.add(t);break}}}u.has(r)||(d={path:[...i,r],before:n[r],action:y.remove},s.mergeResult(o,s.diffResult(d)))}}for(let e=0;e<a.length;e++)f.has(e)||(t={path:[...i,-1],after:a[e],action:y.add},s.mergeResult(o,s.diffResult(t)));return o},Q=(e,t,r)=>{e=E(e,t,new W(e,t,r)).value;return e};class W extends V{constructor(e,t,r){super(e,t,r),this._formatMeta=e=>Object.assign({type:e.type,action:e.action},e.action===y.replace?{replaced:e.before}:{}),this.formatMeta=r.formatMeta||(e=>this._formatMeta(e)),this.metaKey=r.metaKey||n,this.arrayMeta=r.arrayMeta||!1}equalResult(e,t){return{diffs:[],value:e,path:t}}diffResult(e){return{diffs:[B(e,this.rules)],diff:B(e,this.rules),path:e.path}}mergeResult(e,t){var r;e.diffs=[...e.diffs,...t.diffs];let n=t.path[t.path.length-1];var a="number"==typeof n;const s=e.value||(a?[]:{});n=-1===n?s.length:n,t.diff?(t.diff.action===y.remove?s[n]=t.diff.before:s[n]=t.diff.after,a=this.formatMeta(t.diff),"array"!==b(s)||this.arrayMeta?s[this.metaKey]=Object.assign(Object.assign({},s[this.metaKey]),{[n]:a}):e.meta={array:Object.assign(Object.assign({},null==(r=e.meta)?void 0:r.array),{[n]:a})}):(s[n]=t.value,t.meta&&(s[this.metaKey]={[n]:t.meta})),e.value=s,e.path=t.path.slice(0,-1)}}}]);