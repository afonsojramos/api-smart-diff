/*! api-smart-diff@0.2.9 */
var ApiSmartDiff=function(r){var n={};function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=r,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(T,e,t){"use strict";t.r(e),t.d(e,"messageTraitsRules",function(){return k}),t.d(e,"messageRules",function(){return M}),t.d(e,"asyncApi2Rules",function(){return A}),t.d(e,"openapi3Rules",function(){return F}),t.d(e,"jsonSchemaRules",function(){return S}),t.d(e,"DIFF_META_KEY",function(){return n}),t.d(e,"DiffAction",function(){return y}),t.d(e,"ClassifierType",function(){return r}),t.d(e,"breaking",function(){return a}),t.d(e,"nonBreaking",function(){return s}),t.d(e,"unclassified",function(){return o}),t.d(e,"annotation",function(){return i}),t.d(e,"allNonBreaking",function(){return c}),t.d(e,"allBreaking",function(){return f}),t.d(e,"onlyAddBreaking",function(){return l}),t.d(e,"addNonBreaking",function(){return u}),t.d(e,"allUnclassified",function(){return d}),t.d(e,"allAnnotation",function(){return p}),t.d(e,"apiDiff",function(){return J}),t.d(e,"apiMerge",function(){return H}),t.d(e,"findExternalRefs",function(){return v});const n="$diff";var y,r;(t=y=y||{}).add="add",t.remove="remove",t.replace="replace",(e=r=r||{}).breaking="breaking",e.nonBreaking="non-breaking",e.annotation="annotation",e.unclassified="unclassified";const{breaking:a,nonBreaking:s,unclassified:o,annotation:i}=r,c=[s,s,s],f=[a,a,a],l=[a,s,s],u=[s,a,a],d=[o,o,o],p=[i,i,i],h=e=>e?a:s,m=(e,t)=>h(t),b=e=>Array.isArray(e)?"array":null==typeof e?"null":typeof e,g=e=>"/"+e.map(e=>String(e).replace(new RegExp("/","g"),"~1")).join("/"),v=e=>{if("object"!=typeof e)return[];let t=new Set;if("array"===b(e))for(const n of e)"object"==typeof n&&(t=new Set([...t,...v(n)]));else for(const a of Object.keys(e)){var r;"$ref"===a?([r]=e[a].split("#"),r&&t.add(r)):"object"==typeof e[a]&&(t=new Set([...t,...v(e[a])]))}return[...t]},O=[a,s,(e,t)=>h(t<e)],x=[a,s,(e,t)=>h(e<t)],w=[m,s,m],j=[m,s,m],q=[a,s,(e,t)=>!(e%t)?s:a],S=(e=d)=>({"/":e,"/title":p,"/multipleOf":q,"/maximum":O,"/exclusiveMaximum":w,"/minimum":x,"/exclusiveMinimum":w,"/maxLength":O,"/minLength":x,"/pattern":[a,s,a],"/maxItems":O,"/minItems":x,"/uniqueItems":j,"/maxProperties":O,"/minProperties":x,"/required":{"/":l,"/*":[a,s,a]},"/enum":{"/":[a,s,a],"/*":[s,a,a]},"/type":[a,s,a],"/not":{"/":[a,s,a],"/*":()=>S(f)},"/allOf":{"/":[a,s,a],"/*":()=>S(f)},"/oneOf":{"/":[a,s,a],"/*":()=>S(u)},"/anyOf":{"/":[a,s,a],"/*":()=>S(u)},"/items":()=>S(u),"/properties":{"/":[a,s,a],"/*":()=>S(u)},"/additionalProperties":()=>S([a,a,m]),"/description":p,"/format":[a,s,a],"/default":[s,a,a],"/nullable":j,"/discriminator":{"/":d,"/propertyName":d,"/mapping":d},"/readOnly":j,"/writeOnly":j,"/example":p,"/examples":p,"/externalDocs":p,"/deprecated":j,"/xml":{"/":d,"/name":d,"/namespace":d,"/prefix":d,"/attribute":d,"/wrapped":d}});var t={"/":u,"/location":u,"/description":p},e={"/summary":p,"/tags":p,"/externalDocs":p,"/bindings":d},R=Object.assign({"/":u,"/*":u,"/operationId":u,"/description":p},e);const k=Object.assign({"/":u,"/*":u,"/headers":d,"/correlationId":t,"/schemaFormat":f,"/contentType":u,"/name":c,"/title":c,"/examples":p},e),M=Object.assign({"/":f,"/headers":d,"/correlationId":t,"/schemaFormat":f,"/contentType":u,"/name":c,"/title":c,"/description":c,"/examples":p,"/traits":k,"/payload":S(f)},e);t=Object.assign({"/":u,"/operationId":u,"/description":p,"/traits":R,"/message":M},e),R={"/":u,"/version":u,"/termsOfService":u,"/license":{"/":u,"/name":f,"/url":l},"/title":p,"/description":p,"/contact":{"/":p,"/name":p,"/url":p,"/email":p}},e={"/":u,"/*":{"/":u,"/url":u,"/description":p,"/protocol":f,"/protocolVersion":f,"/variables":{"/":u,"/*":{"/":u,"/enum":{"/":u,"/*":u},"/default":f,"/description":p,"/examples":p}},"/security":{"/":f,"/*":f},"/bindings":d}},t={"/":u,"/description":c,"/bindings":d,"/subscribe":t,"/publish":t,"/parameters":{"/":f,"/*":{"/":u,"/description":c,"/schema":S(f),"/location":f}}};const A={"/asyncapi":u,"/id":p,"/defaultContentType":f,"/info":R,"/servers":e,"/channels":{"/":u,"/*":t},"/components":c,"/tags":p,"/externalDocs":p};var R={"/":[s,a,a],"/*":{"/":[s,a,a],"/url":[s,a,a],"/description":p,"/variables":{"/":[s,a,a],"/*":{"/":[s,a,a],"/enum":{"/":[s,a,a],"/*":[s,a,a]},"/default":[a,a,a],"/description":p}}}},e={"/":[s,a,a],"/*":{"/":[s,a,a],"/name":[s,a,a],"/in":[s,a,a],"/description":p,"/required":[a,s,m],"/deprecated":[a,s,m]}},t={"/":[s,a,a],"/*":{"/":[s,a,a],"/description":p,"/required":[a,s,m],"/deprecated":[a,s,m]}},P={"/":[s,s,s],"/*":{"/contentType":[s,a,a],"/headers":t,"/style":[s,a,a],"/explode":[s,a,a],"/allowReserved":[s,a,a]}},P={"/":[s,a,a],"/*":{"/":[s,a,a],"/schema":S(f),"/example":p,"/examples":p,"/encoding":P}},C={"/":[s,a,a],"/*":{"/":[s,a,a],"/description":p,"/content":P,"/required":[a,s,(e,t)=>t?a:s]}},P={"/":[s,a,a],"/*":{"/":[s,a,a],"/description":p,"/headers":t,"/content":P}},I={"/":[a,s,o],"/*":[a,s,o]},E={"/":[s,a,a],"/tags":p,"/summary":p,"/description":p,"/externalDocs":p,"/operationId":[s,a,a],"/parameters":e,"/requestBody":C,"/responses":P,"/deprecated":[a,s,m],"/security":I,"/servers":R};const F={"/openapi":[s,a,a],"/info":{"/":[s,a,a],"/title":p,"/description":p,"/termsOfService":p,"/contact":p,"/licence":{"/":[s,a,a],"/name":[a,a,a],"/url":[a,s,s]},"/version":p},"/servers":R,"/paths":{"/":[s,a,a],"/*":{"/":[s,a,a],"/summary":p,"/description":p,"/*":E,"/servers":R,"/parameters":e}},"/components":{"/":[s,s,s],"/schemas":{"/":[s,a,a],"/*":S(u)},"/responses":{"/":[s,a,a],"/*":P},"/parameters":{"/":[s,a,a],"/*":e},"/examples":p,"/requestBodies":{"/":[s,a,a],"/*":C},"/headers":t,"/securitySchemes":{"/":[a,s,a],"/*":{"/":[a,s,a],"/type":[a,s,a],"/description":p,"/name":[a,s,a],"/in":[a,s,a],"/scheme":[a,s,a],"/bearerFormat":p,"/flows":[a,s,a],"/openIdConnectUrl":p}}},"/security":I,"/tags":p,"/externalDocs":p};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */const K=(e,t,r={})=>{let n=e;r=new Map(Object.entries(r));for(const a of(e=>{var[,...e]=e.split("/").map(e=>e.replace(new RegExp("~1","g"),"/"));return e})(t)){if(void 0===(n="array"===b(n)?n[+a]:n[a]))break;n=$(n,e,new Set,r)}return n},$=(e,t,r,n)=>{if(e.hasOwnProperty("$ref")){const o=e["$ref"],i=function(e,t){var r={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}(e,["$ref"]);if(r.has(o))return e;var[a,s]=o.split("#");if(a){if(!n.has(a))return e;t=n.get(a)}e=Object.assign(Object.assign({},i),K(t,s,n)),r.add(o),n.set(o,e)}return e},L=(e,t)=>{let r=e;for(var n of[...t,""]){if(r.hasOwnProperty("/"+n)&&"number"!=typeof n||(n="*"),!r.hasOwnProperty("/"+n))return d;{const a=r["/"+n];if(Array.isArray(a))return a;r="function"==typeof a?a():a}}return d},B=(e,t={})=>{const r=e;const n=L(t,e.path)[["add","remove","replace"].indexOf(e.action)];return r.type="function"==typeof n?n(e.before,e.after):n,r};class N{constructor(e,t,r){this.before=e,this.after=t,this.beforeRefs=new Set,this.afterRefs=new Set,this.beforeCache=new Map,this.afterCache=new Map,this.rules="string"==typeof r.rules?this.getBaseRules(r.rules):r.rules,this.trimStrings=r.trimStrings,this.caseSensitive=r.caseSensitive,this.strictArrays=r.strictArrays,this.arrayMeta=r.arrayMeta||!1;var n=r.externalRefs||{};for(const a of Object.keys(n))this.beforeCache.set(a,n[a]),this.afterCache.set(a,n[a])}getBaseRules(e){switch(e){case"OpenApi3":return F;case"AsyncApi2":return A;case"JsonSchema":return S()}}}class U extends N{constructor(e,t,r){super(e,t,r),this._formatMeta=e=>Object.assign({type:e.type,action:e.action},e.action===y.replace?{replaced:e.before}:{}),this.formatMeta=r.formatMeta||(e=>this._formatMeta(e)),this.metaKey=r.metaKey||n}}const J=(e,t,r)=>_(e,t,new N(e,t,r)),_=(e,t,r,n=[])=>{var a;if(b(e)!==b(t))return a={path:n,before:e,after:t,action:y.replace},[B(a,r.rules)];switch(b(e)){case"object":return Y(e,t,r,n);case"array":return z(e,t,r,n);default:"string"===b(e)&&(e=V(e,r),t=V(t,r));var s={path:n,before:e,after:t,action:y.replace};return e!==t?[B(s,r.rules)]:[]}},V=(e,t)=>(e=t.trimStrings?e.trim():e,e=t.caseSensitive?e:e.toLowerCase()),Y=(e,t,r,n)=>{const a=[];var s,o="#"+g(n);r.beforeRefs.add(o),r.afterRefs.add(o);const i=$(e,r.before,r.beforeRefs,r.beforeCache),c=$(t,r.after,r.afterRefs,r.afterCache);for(const f of new Set([...Object.keys(i),...Object.keys(c)]))"symbol"!=typeof f&&(i.hasOwnProperty(f)?c.hasOwnProperty(f)?a.push(..._(i[f],c[f],r,[...n,f])):(s={path:[...n,f],before:i[f],action:y.remove},a.push(B(s,r.rules))):(s={path:[...n,f],after:c[f],action:y.add},a.push(B(s,r.rules))));return e.$ref&&r.beforeRefs.delete(e.$ref),t.$ref&&r.afterRefs.delete(t.$ref),r.beforeRefs.delete(o),r.afterRefs.delete(o),a},z=(t,r,n,a)=>{const s=[],o=[...r];if(n.strictArrays)for(let e=0;e<t.length;e++){var i;e>=r.length?(i={path:[...a,e],before:t[e],action:y.remove},s.push(B(i,n.rules))):s.push(..._(t[e],r[e],n,[...a,e]))}else{var e,c,f,l=G(t,r,n,a);for(e of l.added){var u={path:[...a,e],after:r[e],action:y.add};s.push(B(u,n.rules))}for(c of l.removed){var d={path:[...a,c],before:t[c],action:y.remove};s.push(B(d,n.rules))}for(f of Object.keys(l.changed))s.push(...l.changed[+f].diffs)}if(n.strictArrays){o.splice(0,t.length);for(let e=0;e<o.length;e++){var p={path:[...a,t.length+e],after:o[e],action:y.add};s.push(B(p,n.rules))}}return s},G=(n,a,s,o)=>{const i={added:[],removed:[],changed:{},unchanged:[]},e=[],c=[],f=new Set,l=new Set;for(let r=0;r<n.length;r++){let t=[];for(let e=0;e<a.length;e++)if(!f.has(e)){var u=_(n[r],a[e],s,[...o,r]);if(!u.length){f.add(e),t=e;break}t.push(u)}"number"==typeof t&&l.add(r),c.push(t)}for(let r=0;r<n.length;r++)if(l.has(r))e[r]=[],i.unchanged.push(r);else{const t=[...Array(a.length).keys()];var d=t.sort((e,t)=>{return((null==(e=c[r][e])?void 0:e.length)||0)-((null==(e=c[r][t])?void 0:e.length)||0)});for(let e=0;e<a.length;e++){let t=d[e];if(!f.has(t)){for(let e=0;e<n.length;e++)if(!l.has(e)&&c[e][t]<c[r][t]){t=-1;break}if(0<=t){i.changed[r]={afterIndex:t,diffs:c[r][t]},l.add(r),f.add(t);break}}}l.has(r)||i.removed.push(r)}for(let e=0;e<a.length;e++)f.has(e)||i.added.push(e);return i},H=(e,t,r)=>{var[e]=D(e,t,new U(e,t,r),[]);return e},D=(e,t,r,n=[])=>{var a,s;if(b(e)!==b(t))return a={path:n,before:e,after:t,action:y.replace},[t,r.formatMeta(B(a,r.rules))];switch(b(e)){case"object":return W(e,t,r,n);case"array":return X(e,t,r,n);default:if("string"==typeof e&&(e=Q(e,r),t=Q(t,r)),e!==t)return s={path:n,before:e,after:t,action:y.replace},[t,r.formatMeta(B(s,r.rules))]}return[t]},Q=(e,t)=>(e=t.trimStrings?e.trim():e,e=t.caseSensitive?e:e.toLowerCase()),W=(e,t,r,n)=>{const a={},s={};var o,i,c="#"+g(n);r.beforeRefs.add(c),r.afterRefs.add(c);const f=$(e,r.before,r.beforeRefs,r.beforeCache),l=$(t,r.after,r.afterRefs,r.afterCache);for(const u of new Set([...Object.keys(f),...Object.keys(l)]))"symbol"!=typeof u&&(f.hasOwnProperty(u)?l.hasOwnProperty(u)?([o,i]=D(f[u],l[u],r,[...n,u]),a[u]=o,i&&(s[u]=i)):(o={path:[...n,u],before:f[u],action:y.remove},a[u]=f[u],s[u]=r.formatMeta(B(o,r.rules))):(i={path:[...n,u],after:l[u],action:y.add},a[u]=l[u],s[u]=r.formatMeta(B(i,r.rules))));return e.$ref&&r.beforeRefs.delete(e.$ref),t.$ref&&r.afterRefs.delete(t.$ref),r.beforeRefs.delete(c),r.afterRefs.delete(c),Object.keys(s).length&&(a[r.metaKey]=s),[a]},X=(r,t,n,a)=>{const s={},o=[],i=[...t];if(n.strictArrays)for(let e=0;e<r.length;e++){var c,f;e>=t.length?(c={path:[...a,e],before:r[e],action:y.remove},o[e]=r[e],s[e]=n.formatMeta(B(c,n.rules))):([c,f]=D(r[e],t[e],n,[...a,e]),o[e]=c,f&&(s[e]=f))}else{const h=G(r,t,n,a);for(let e=0;e<r.length;e++){var l,u,d;o[e]=r[e],h.unchanged.includes(e)||(h.removed.includes(e)?(l={path:[...a,e],before:r[e],action:y.remove},s[e]=n.formatMeta(B(l,n.rules))):h.changed[e]&&(l=h.changed[e]["afterIndex"],[u,d]=D(r[e],t[l],n,[...a,e]),o[e]=u,d&&(s[e]=d)))}for(const m of h.added){var e=o.length,e=(o.push(t[m]),{path:[...a,e],after:t[m],action:y.add});s[m]=n.formatMeta(B(e,n.rules))}}if(n.strictArrays){i.splice(0,r.length);for(let e=r.length,t=0;e<r.length+i.length;e++,t++){o[e]=i[t];var p={path:[...a,e],after:i[t],action:y.add};s[e]=n.formatMeta(B(p,n.rules))}}return n.arrayMeta&&Object.keys(s).length&&(o[n.metaKey]=s),n.arrayMeta||!Object.keys(s).length?[o]:[o,{array:s}]}}]);