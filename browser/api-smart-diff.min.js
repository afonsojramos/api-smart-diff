/*! api-smart-diff@0.2.17 */
var ApiSmartDiff=function(r){var n={};function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=r,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(E,e,t){"use strict";t.r(e),t.d(e,"messageTraitsRules",function(){return z}),t.d(e,"messageRules",function(){return L}),t.d(e,"asyncApi2Rules",function(){return U}),t.d(e,"openapi3Rules",function(){return V}),t.d(e,"jsonSchemaRules",function(){return M}),t.d(e,"serviceNodeRules",function(){return G}),t.d(e,"RuleMetaKey",function(){return n}),t.d(e,"DIFF_META_KEY",function(){return a}),t.d(e,"DiffAction",function(){return y}),t.d(e,"ClassifierType",function(){return r}),t.d(e,"breaking",function(){return s}),t.d(e,"nonBreaking",function(){return i}),t.d(e,"unclassified",function(){return o}),t.d(e,"annotation",function(){return c}),t.d(e,"allNonBreaking",function(){return f}),t.d(e,"allBreaking",function(){return u}),t.d(e,"onlyAddBreaking",function(){return l}),t.d(e,"addNonBreaking",function(){return d}),t.d(e,"allUnclassified",function(){return p}),t.d(e,"allAnnotation",function(){return m}),t.d(e,"apiDiff",function(){return Q}),t.d(e,"compare",function(){return C}),t.d(e,"apiMerge",function(){return ee}),t.d(e,"breakingIf",function(){return h}),t.d(e,"breakingIfAfterTrue",function(){return g}),t.d(e,"typeOf",function(){return b}),t.d(e,"parsePath",function(){return v}),t.d(e,"buildPath",function(){return R}),t.d(e,"getRules",function(){return O}),t.d(e,"getPathRuleMeta",function(){return K}),t.d(e,"findExternalRefs",function(){return x}),t.d(e,"enumRules",function(){return _}),t.d(e,"objArray",function(){return j}),t.d(e,"mapRules",function(){return D});const n=Symbol("rule"),a="$diff";var y,r;(t=y=y||{}).add="add",t.remove="remove",t.replace="replace",(e=r=r||{}).breaking="breaking",e.nonBreaking="non-breaking",e.annotation="annotation",e.unclassified="unclassified";const{breaking:s,nonBreaking:i,unclassified:o,annotation:c}=r,f=[i,i,i],u=[s,s,s],l=[s,i,i],d=[i,s,s],p=[o,o,o],m=[c,c,c],h=e=>e?s:i,g=(e,t)=>h(t),b=e=>Array.isArray(e)?"array":null==typeof e?"null":typeof e,v=e=>{var[,...e]=e.split("/").map(e=>e.replace(new RegExp("~1","g"),"/"));return e},R=e=>"/"+e.map(e=>String(e).replace(new RegExp("/","g"),"~1")).join("/"),O=(e,t,r)=>{let n=e,a=r;for(var s of[...t]){if(a=void 0!==s&&void 0!==a?a[s]:void 0,n.hasOwnProperty("/"+s)&&"number"!=typeof s||(s="*"),!n.hasOwnProperty("/"+s))return;{const i=n["/"+s];if(Array.isArray(i))return i;n="function"==typeof i?i(a):i}}return n},K=(e,t,r)=>{e=O(e,t,r);if(e&&!Array.isArray(e)&&n in e)return e[n]},x=e=>{if("object"!=typeof e)return[];let t=new Set;if("array"===b(e))for(const n of e)"object"==typeof n&&(t=new Set([...t,...x(n)]));else for(const a of Object.keys(e)){var r;"$ref"===a?([r]=e[a].split("#"),r&&t.add(r)):"object"==typeof e[a]&&(t=new Set([...t,...x(e[a])]))}return[...t]},_=(e,t)=>(e[n]={matchItemsFunc:t},e),j=(r,e)=>(e[n]={matchItemsFunc:(e,t)=>t[r]===e[r]},e),D=(e,t)=>(e[n]={matchKeysFunc:t},e),w=[s,i,(e,t)=>h(t<e)],S=[s,i,(e,t)=>h(e<t)],$=[g,i,g],k=[g,i,g],N=[s,i,(e,t)=>h(!!(e%t))],M=(e=p)=>({"/":e,"/title":m,"/multipleOf":N,"/maximum":w,"/exclusiveMaximum":$,"/minimum":S,"/exclusiveMinimum":$,"/maxLength":w,"/minLength":S,"/pattern":[s,i,s],"/maxItems":w,"/minItems":S,"/uniqueItems":k,"/maxProperties":w,"/minProperties":S,"/required":{"/":l,"/*":[s,i,s]},"/enum":{"/":[s,i,s],"/*":[i,s,s]},"/type":[s,i,s],"/not":{"/":[s,i,s],"/*":()=>M(u)},"/allOf":{"/":[s,i,s],"/*":()=>M(u)},"/oneOf":{"/":[s,i,s],"/*":()=>M(d)},"/anyOf":{"/":[s,i,s],"/*":()=>M(d)},"/items":()=>M(d),"/properties":{"/":[s,i,s],"/*":()=>M(d)},"/additionalProperties":()=>M([s,s,g]),"/description":m,"/format":[s,i,s],"/default":[i,s,s],"/nullable":k,"/discriminator":{"/":p,"/propertyName":p,"/mapping":p},"/readOnly":k,"/writeOnly":k,"/example":m,"/examples":m,"/externalDocs":m,"/deprecated":k,"/xml":{"/":p,"/name":p,"/namespace":p,"/prefix":p,"/attribute":p,"/wrapped":p}});var t={"/":d,"/location":d,"/description":m},e={"/summary":m,"/tags":m,"/externalDocs":m,"/bindings":p},A=Object.assign({"/":d,"/*":d,"/operationId":d,"/description":m},e);const z=Object.assign({"/":d,"/*":d,"/headers":p,"/correlationId":t,"/schemaFormat":u,"/contentType":d,"/name":f,"/title":f,"/examples":m},e),L=Object.assign({"/":u,"/headers":p,"/correlationId":t,"/schemaFormat":u,"/contentType":d,"/name":f,"/title":f,"/description":f,"/examples":m,"/traits":z,"/payload":M(u)},e);t=Object.assign({"/":d,"/operationId":d,"/description":m,"/traits":A,"/message":L},e),A={"/":d,"/version":d,"/termsOfService":d,"/license":{"/":d,"/name":u,"/url":l},"/title":m,"/description":m,"/contact":{"/":m,"/name":m,"/url":m,"/email":m}},e={"/":d,"/*":{"/":d,"/url":d,"/description":m,"/protocol":u,"/protocolVersion":u,"/variables":{"/":d,"/*":{"/":d,"/enum":{"/":d,"/*":d},"/default":u,"/description":m,"/examples":m}},"/security":{"/":u,"/*":u},"/bindings":p}},t={"/":d,"/description":f,"/bindings":p,"/subscribe":t,"/publish":t,"/parameters":{"/":u,"/*":{"/":d,"/description":f,"/schema":M(u),"/location":u}}};const U={"/asyncapi":d,"/id":m,"/defaultContentType":u,"/info":A,"/servers":e,"/channels":{"/":d,"/*":t},"/components":f,"/tags":m,"/externalDocs":m};var A={"/":[i,s,s],"/*":{"/":[i,s,s],"/url":[i,s,s],"/description":m,"/variables":{"/":[i,s,s],"/*":{"/":[i,s,s],"/enum":{"/":[i,s,s],"/*":[i,s,s]},"/default":[s,s,s],"/description":m}}}},e={"/":[i,s,s],"/*":{"/":[i,s,s],"/name":[i,s,s],"/in":[i,s,s],"/description":m,"/required":[s,i,g],"/deprecated":[s,i,g]}},t={"/":[i,s,s],"/*":{"/":[i,s,s],"/description":m,"/required":[s,i,g],"/deprecated":[s,i,g]}},I={"/":[i,i,i],"/*":{"/contentType":[i,s,s],"/headers":t,"/style":[i,s,s],"/explode":[i,s,s],"/allowReserved":[i,s,s]}},I={"/":[i,s,s],"/*":{"/":[i,s,s],"/schema":M(u),"/example":m,"/examples":m,"/encoding":I}},P={"/":[i,s,s],"/*":{"/":[i,s,s],"/description":m,"/content":I,"/required":[s,i,(e,t)=>t?s:i]}},I={"/":[i,s,s],"/*":{"/":[i,s,s],"/description":m,"/headers":t,"/content":I}},q={"/":[s,i,o],"/*":[s,i,o]},F={"/":[i,s,s],"/tags":m,"/summary":m,"/description":m,"/externalDocs":m,"/operationId":[i,s,s],"/parameters":e,"/requestBody":P,"/responses":I,"/deprecated":[s,i,g],"/security":q,"/servers":A};const V={"/openapi":[i,s,s],"/info":{"/":[i,s,s],"/title":m,"/description":m,"/termsOfService":m,"/contact":m,"/licence":{"/":[i,s,s],"/name":[s,s,s],"/url":[s,i,i]},"/version":m},"/servers":A,"/paths":(F={"/":[i,s,s],"/*":{"/":[i,s,i],"/summary":m,"/description":m,"/*":F,"/servers":A,"/parameters":e}},D(F,(e,t)=>{return e.replace(new RegExp("{.*?}","g"),"*")===t.replace(new RegExp("{.*?}","g"),"*")})),"/components":{"/":[i,i,i],"/schemas":{"/":[i,s,s],"/*":M(d)},"/responses":{"/":[i,s,s],"/*":I},"/parameters":{"/":[i,s,s],"/*":e},"/examples":m,"/requestBodies":{"/":[i,s,s],"/*":P},"/headers":t,"/securitySchemes":{"/":[s,i,s],"/*":{"/":[s,i,s],"/type":[s,i,s],"/description":m,"/name":[s,i,s],"/in":[s,i,s],"/scheme":[s,i,s],"/bearerFormat":m,"/flows":[s,i,s],"/openIdConnectUrl":m}}},"/security":q,"/tags":m,"/externalDocs":m};A=e=>_(e,(e,t)=>{var r;return t.type===e.type&&("model"===t.type?t.name===e.name:(null==(r=e.data.path)?void 0:r.replace(new RegExp("{.*?}","g"),"*"))===(null==(r=t.data.path)?void 0:r.replace(new RegExp("{.*?}","g"),"*"))&&e.data.method===t.data.method)}),F={"/name":[i,s,s],"/style":p,"/description":m,"/explode":p,"/required":[s,i,g],"/deprecated":[s,i,g]},I={"/":[i,s,s],"/*":F},e={"/":d,"/*":{"/":[i,s,s],"/mediaType":[i,s,s],"/schema":M(u),"/examples":j("key",{"/":m,"/*":m}),"/encodings":[i,s,s]}},P={"/path":j("name",I),"/query":j("name",{"/":[i,s,s],"/*":Object.assign(Object.assign({},F),{"/allowEmptyValue":[s,i,g],"/allowReserved":[s,i,g]})}),"/headers":j("name",I),"/cookie":j("name",I),"/body":{"/":[i,s,s],"/contents":j("mediaType",e),"/required":[s,i,g],"/description":m}},t={"/":p,"/*":{"/name":[i,s,s],"/style":p,"/description":m,"/explode":p,"/required":[s,i,g],"/deprecated":[s,i,g]}},q={"/":d,"/*":{"/":d,"/code":p,"/contents":j("mediaType",e),"/headers":j("name",t),"/description":m}},F={"/":[i,s,s],"/url":[i,s,s],"/name":m,"/description":m,"/variables":[i,s,s]},I={"/":[s,i,o],"/*":[s,i,o]};const J={"/":[i,s,s],"/data":()=>M(d),"/*":m},Y={"/":[i,s,s],"/data":{"/id":m,"/iid":m,"/tags":m,"/summary":m,"/description":m,"/method":[i,s,s],"/path":[i,s,s],"/request":P,"/responses":j("code",q),"/servers":{"/":p,"/*":F},"/callbacks":A({"/callbackName":m,"/method":[i,s,s],"/path":[i,s,s],"/request":P,"/responses":j("code",q),"/deprecated":p,"/internal":p,"/extensions":p}),"/security":I,"/deprecated":[s,i,g],"/internal":p,"/extensions":p},"/*":m};e={"/id":m,"/iid":m,"/tags":m,"/summary":m,"/description":m,"/name":m,"/version":m,"/servers":{"/":[i,s,s],"/*":F},"/security":I,"/securitySchemes":j("name",{"/":d,"/*":{"/":[s,i,s],"/type":[s,i,s],"/description":m,"/name":[s,i,s],"/in":[s,i,s],"/scheme":[s,i,s],"/bearerFormat":m,"/flows":[s,i,s],"/openIdConnectUrl":m}}),"/termsOfService":m,"/contact":m,"/license":[s,s,s],"/logo":m};const G={"/*":m,"/data":e,"/children":A({"/":[i,s,s],"/*":({type:e})=>"model"===e?J:Y}),"/components":{"/":[i,i,i],"/schemas":{"/":[i,s,s],"/*":M(d)}}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */const T=(e,t,r,n)=>{if(e.hasOwnProperty("$ref")){const i=e["$ref"],o=function(e,t){var r={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}(e,["$ref"]);if(r.has(i))return e;var[a,s]=i.split("#");if(a){if(!n.has(a))return e;t=n.get(a)}e=Object.assign(Object.assign({},o),((e,t,r={})=>{let n=e;r=new Map(Object.entries(r));for(const a of v(t)){if(void 0===(n="array"===b(n)?n[+a]:n[a]))break;n=T(n,e,new Set,r)}return n})(t,s,n)),r.add(i),n.set(i,e)}return e},B=(e,t,r={})=>{const n=e;r=O(r,[...e.path,""],t);const a=(Array.isArray(r)?r:p)[["add","remove","replace"].indexOf(e.action)];return n.type="function"==typeof a?a(e.before,e.after):a,n};class H{constructor(e,t,r){this.before=e,this.after=t,this.beforeRefs=new Set,this.afterRefs=new Set,this.beforeCache=new Map,this.afterCache=new Map,this.rules="string"==typeof r.rules?this.getBaseRules(r.rules):r.rules||{},this.trimStrings=r.trimStrings,this.caseSensitive=r.caseSensitive,this.strictArrays=r.strictArrays;var n=r.externalRefs||{};for(const a of Object.keys(n))this.beforeCache.set(a,n[a]),this.afterCache.set(a,n[a])}normalizeString(e){return e=this.trimStrings?e.trim():e,e=this.caseSensitive?e:e.toLowerCase()}getPathRuleMeta(e){return K(this.rules,e,this.before)}dereference(e,t,r){const n="#"+R(r);this.beforeRefs.add(n),this.afterRefs.add(n);return[T(e,this.before,this.beforeRefs,this.beforeCache),T(t,this.after,this.afterRefs,this.afterCache),()=>{e.$ref&&this.beforeRefs.delete(e.$ref),t.$ref&&this.afterRefs.delete(t.$ref),this.beforeRefs.delete(n),this.afterRefs.delete(n)}]}getBaseRules(e){switch(e){case"OpenApi3":return V;case"AsyncApi2":return U;case"JsonSchema":return M()}}equalResult(e,t){return{diffs:[]}}diffResult(e){return{diffs:[B(e,this.before,this.rules)]}}mergeResult(e,t){e.diffs=[...e.diffs,...t.diffs]}}const Q=(e,t,r)=>{return C(e,t,new H(e,t,r)).diffs},C=(e,t,r,n=[])=>{if(b(e)!==b(t))return r.diffResult({path:n,before:e,after:t,action:y.replace});switch(b(e)){case"object":return W(e,t,r,n);case"array":return X(e,t,r,n);default:return"string"==typeof e&&(e=r.normalizeString(e),t=r.normalizeString(t)),e!==t?r.diffResult({path:n,before:e,after:t,action:y.replace}):r.equalResult(e,n)}},W=(e,t,r,n)=>{var a={diffs:[]};const[s,i,o]=r.dereference(e,t,n);if(0===Object.keys(s).length&&0===Object.keys(i).length)return r.equalResult(e,n);t=Object.keys(s);const c=new Set(Object.keys(i)),f=r.getPathRuleMeta(n);for(const m of t){var u,l=[...c].find(e=>e===m||(null===f||void 0===f?void 0:f.matchKeysFunc)&&f.matchKeysFunc(m,e)),d=[...n,m];l&&l!==m&&(u={path:d,before:m,after:l,action:y.replace},r.mergeResult(a,r.diffResult(u))),void 0===l?(u={path:d,before:s[m],action:y.remove},r.mergeResult(a,r.diffResult(u))):(r.mergeResult(a,C(s[m],i[l],r,d)),c.delete(l))}for(const h of c){var p={path:[...n,h],after:i[h],action:y.add};r.mergeResult(a,r.diffResult(p))}return o(),a},X=(t,r,e,n)=>{if(0===t.length&&0===r.length)return e.equalResult(t,n);const a=e.getPathRuleMeta(n);if(!(e.strictArrays||null!==a&&void 0!==a&&a.matchItemsFunc))return Z(t,r,e,n);var s={diffs:[]};const i=new Set(r.keys());for(const f of t.keys()){var o,c=[...n,f];null!==a&&void 0!==a&&a.matchItemsFunc?void 0===(o=(null===a||void 0===a?void 0:a.matchItemsFunc)&&[...i].find(e=>a.matchItemsFunc(t[f],r[e])))?e.mergeResult(s,e.diffResult({path:c,before:t[f],action:y.remove})):(i.delete(o),e.mergeResult(s,C(t[f],r[o],e,c))):f>=r.length?e.mergeResult(s,e.diffResult({path:c,before:t[f],action:y.remove})):(i.delete(f),e.mergeResult(s,C(t[f],r[f],e,c)))}for(const u of i)e.mergeResult(s,e.diffResult({path:[...n,-1],after:r[u],action:y.add}));return s},Z=(n,a,s,i)=>{var t,o={diffs:[]};const e=[],c=[],f=new Set,u=new Set;for(let r=0;r<n.length;r++){let t=[];for(let e=0;e<a.length;e++)if(!f.has(e)){var l=C(n[r],a[e],s,[...i,r]);if(!l.diffs.length){f.add(e),u.add(r),t=l;break}t[e]=l}c.push(t)}for(let r=0;r<n.length;r++){const m=c[r];if(u.has(r))e[r]=[],s.mergeResult(o,m);else{const h=[...Array(a.length).keys()];var d,p=h.sort((e,t)=>{return((null==(e=m[e])?void 0:e.diffs.length)||0)-((null==(e=m[t])?void 0:e.diffs.length)||0)});for(let e=0;e<a.length;e++){let t=p[e];if(!f.has(t)){for(let e=0;e<n.length;e++)if(!u.has(e)&&c[e][t]<c[r][t]){t=-1;break}if(0<=t){s.mergeResult(o,m[t]),u.add(r),f.add(t);break}}}u.has(r)||(d={path:[...i,r],before:n[r],action:y.remove},s.mergeResult(o,s.diffResult(d)))}}for(let e=0;e<a.length;e++)f.has(e)||(t={path:[...i,-1],after:a[e],action:y.add},s.mergeResult(o,s.diffResult(t)));return o},ee=(e,t,r)=>{e=C(e,t,new te(e,t,r)).value;return e};class te extends H{constructor(e,t,r){super(e,t,r),this._formatMeta=e=>Object.assign({type:e.type,action:e.action},e.action===y.replace?{replaced:e.before}:{}),this.formatMeta=r.formatMeta||(e=>this._formatMeta(e)),this.metaKey=r.metaKey||a,this.arrayMeta=r.arrayMeta||!1}equalResult(e,t){return{diffs:[],value:e,path:t}}diffResult(e){return{diffs:[B(e,this.before,this.rules)],diff:B(e,this.before,this.rules),path:e.path}}mergeResult(e,t){var r;e.diffs=[...e.diffs,...t.diffs];let n=t.path[t.path.length-1];var a="number"==typeof n;const s=e.value||(a?[]:{});n=-1===n?s.length:n,t.diff?(t.diff.action===y.remove?s[n]=t.diff.before:s[n]=t.diff.after,a=this.formatMeta(t.diff),"array"!==b(s)||this.arrayMeta?s[this.metaKey]=Object.assign(Object.assign({},s[this.metaKey]),{[n]:a}):e.meta={array:Object.assign(Object.assign({},null==(r=e.meta)?void 0:r.array),{[n]:a})}):(s[n]=t.value,t.meta&&(s[this.metaKey]={[n]:t.meta})),e.value=s,e.path=t.path.slice(0,-1)}}}]);